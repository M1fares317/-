<html>
  <head>
    <title>DnD Основи</title>
    <link rel="stylesheet"href="style.css"/>
    <meta name="google-site-verification" content="HrHVORNJvVr7B079UzC3JnL18nAmkYMQNrRqELIA0q4" />
   </head>
   <body>
    <header>
    <h1>Топ 7 причин:<br> Чому я не люблю Disney</h1>
    <h2>Дисклеймер</h2>
    <P class=opus>Все сказане на сторінках за навігацією лише моя суб'єктивна думка і вона може відрізнятизя від вашої!</P>
    <nav>
      <a href="ironmanl.html" class="about">№1</a>
      <a href="theowlhouse.html" class="blog">№2</a>
      <a href="atlantis.html" class="projects">№3</a>
      <a href="gravityfalls.html" class="contact">№4</a>
      <a href="starwars.html" class="about1">№5</a>
      <a href="treasureplanet.html" class="blog1">№6</a>
      <a href="lionking.html" class="projects1">№7</a>
  </nav>
    </header>
    <main>
     <img id="mickey" src="https://i.pinimg.com/originals/5c/92/46/5c9246d71e8bcf0656fa8475b767c6ab.gif" alt="Микки Маус GIF">
    <script>
            const mickey = document.getElementById('mickey');

        let isDragging = false;
        let isFalling = false;
        let currentX;
        let currentY;
        let initialX;
        let initialY;
        let xOffset = 0;
        let yOffset = 0;

        let directionX = 1;
        let directionY = 1;
        const speed = 2;

        
        const fallSpeed = 10;
        let rotation = 0;

        const gifUrl = "https://i.pinimg.com/originals/5c/92/46/5c9246d71e8bcf0656fa8475b767c6ab.gif";

        
        function setTransform(xPos, yPos, rotationDeg, el) {
        el.style.transform = `translate3d(${xPos}px, ${yPos}px, 0) rotate(${rotationDeg}deg)`;
        }
        
        setTransform(xOffset, yOffset, rotation, mickey);
        function restartGif() {
        mickey.src = "";
        mickey.src = gifUrl;
        }
        const gifLoopInterval = 3000;
        let gifIntervalId;

        function startGifLoop() {
        if (gifIntervalId) {
            clearInterval(gifIntervalId);
        }
        gifIntervalId = setInterval(restartGif, gifLoopInterval);
        }

        function stopGifLoop() {
        if (gifIntervalId) {
            clearInterval(gifIntervalId);
            gifIntervalId = null;
        }
        }
        // --- Конец новой части ---
        // Начало перетаскивания или запуск падения
        mickey.addEventListener('mousedown', handleClickOrDragStart);
        mickey.addEventListener('touchstart', handleClickOrDragStart); // Для мобильных устройств
        // Отслеживание движения во время перетаскивания
        document.addEventListener('mousemove', drag);
        document.addEventListener('touchmove', drag);
        // Окончание перетаскивания
        document.addEventListener('mouseup', dragEnd);
        document.addEventListener('touchend', dragEnd);
        document.addEventListener('touchcancel', dragEnd);
        function handleClickOrDragStart(e) {
        if (e.type === "touchstart") {
            initialX = e.touches[0].clientX - xOffset;
            initialY = e.touches[0].clientY - yOffset;
        } else {
            initialX = e.clientX - xOffset;
            initialY = e.clientY - yOffset;
        }
        if (e.target === mickey) {
            if (!isFalling) {
                isDragging = true;
                stopGifLoop(); // Останавливаем автоматический перезапуск при перетаскивании
            }
        }
        }


        function drag(e) {
        if (!isDragging) return;

        e.preventDefault();

        if (e.type === "touchmove") {
            currentX = e.touches[0].clientX - initialX;
            currentY = e.touches[0].clientY - initialY;
        } else {
            currentX = e.clientX - initialX;
            currentY = e.clientY - initialY;
        }

        xOffset = currentX;
        yOffset = currentY;

        setTransform(currentX, currentY, rotation, mickey);
        }

        function dragEnd(e) {
        initialX = xOffset;
        initialY = yOffset;
        isDragging = false;
        // Продолжаем автоматический перезапуск после окончания перетаскивания,
        // если Микки не падает (т.к. при падении он уже перезапускается по клику)
        if (!isFalling) {
            startGifLoop();
        }
        }

        // Обработчик события 'click' для точного запуска падения
        mickey.addEventListener('click', function() {
        if (!isFalling) {
            isFalling = true;
            rotation = 0; // Сбрасываем поворот
            restartGif(); // Перезапускаем GIF при падении
            stopGifLoop(); // Останавливаем автоматический перезапуск, пока Микки падает
        }
        });


        // --- Дополнительный функционал (Пассивное движение и Падение) ---
        function animateMickey() {
        if (isFalling) {
            // Логика падения
            yOffset += fallSpeed; // Увеличиваем Y для падения вниз
            rotation += 5; // Постепенно увеличиваем угол поворота

            // Если Микки ушел за нижний край, сбрасываем его наверх
            if (yOffset > window.innerHeight) {
                isFalling = false; // Останавливаем падение
                yOffset = -mickey.offsetHeight; // Появляется сверху
                xOffset = Math.random() * (window.innerWidth - mickey.offsetWidth);
                rotation = 0; // Сбрасываем поворот
                restartGif(); // Перезапускаем GIF, когда он появляется сверху
                startGifLoop(); // Снова запускаем автоматический перезапуск
            }
            setTransform(xOffset, yOffset, rotation, mickey);

        } else if (!isDragging) { // Пассивное движение только если не падает и не перетаскивается
            let newX = xOffset + (directionX * speed);
            let newY = yOffset + (directionY * speed);

            // Получаем размеры окна
            const maxX = window.innerWidth - mickey.offsetWidth;
            const maxY = window.innerHeight - mickey.offsetHeight;

            // Отскок от краев по X
            if (newX > maxX || newX < 0) {
                directionX *= -1; // Меняем направление
                newX = Math.max(0, Math.min(newX, maxX)); // Корректируем позицию
            }

            // Отскок от краев по Y
            if (newY > maxY || newY < 0) {
                directionY *= -1; // Меняем направление
                newY = Math.max(0, Math.min(newY, maxY)); // Корректируем позицию
            }

            xOffset = newX;
            yOffset = newY;
            setTransform(xOffset, yOffset, rotation, mickey);
        }
        requestAnimationFrame(animateMickey); // Запускаем анимацию в следующем кадре
        }
        // Запускаем анимацию и автоматический перезапуск GIF при загрузке страницы
        animateMickey();
        startGifLoop(); // <-- Запускаем цикл GIF сразу при загрузке страницы
    </script>
    </main>
    <footer>
      <h2>©2025 Моя компанія. Усі права захищено.</h2>
    </footer>
  </body>
</html>
